schema_version: 1

name: "jboss-webserver-3/webserver31-tomcat7"
description: "Red Hat JBoss Web Server 3.1 Tomcat 7 container image"
version: "3.1.1"
from: "jboss/openjdk18-rhel7:1.1"
labels:
    - name: "org.jboss.product"
      value: "webserver-tomcat7"
    - name: "org.jboss.product.version"
      value: "3.1.1"
    - name: "org.jboss.product.webserver-tomcat7.version"
      value: "3.1.1"
    - name: "org.jboss.deployments-dir"
      value: "/opt/webserver/webapps"
    - name: "com.redhat.deployments-dir"
      value: "/opt/webserver/webapps"
    - name: "com.redhat.deployments-dir"
      value: "/opt/webserver/webapps"
    - name: "com.redhat.dev-mode"
      value: "DEBUG:true"
      description: "Environment variable used to enable development mode (debugging).  A value of true will enable development mode."
    - name: "com.redhat.dev-mode.port"
      value: "JPDA_ADDRESS:8000"
      description: "Environment variable used to specify the debug port.  If not set, the default Tomcat debug port will be used (8000).  Only applicable when development mode is enabled."
envs:
    - name: "JBOSS_PRODUCT"
      value: "webserver"
    - name: "JBOSS_WEBSERVER_VERSION"
      value: "3.1.1"
    - name: "PRODUCT_VERSION"
      value: "3.1.1"
    - name: "TOMCAT_VERSION"
      value: "7.0.70"
    - name: "JWS_HOME"
      value: "/opt/webserver"
    - name: "CATALINA_OPTS"
      value: "-Djava.security.egd=file:/dev/./urandom"
    - name: "JPDA_ADDRESS"
      value: "8000"
      description: "Specify the port to use for debugging. If not set, the default Tomcat debug port will be used (8000).  Only applicable when development mode is enabled."
    - name: DEBUG
      example: false
      description: "Specify true to enable development mode (debugging)."
ports:
    - value: 8080
    - value: 8000
      expose: false
modules:
      repositories:
          - path: modules
      install:
          - name: jws-unpack-tomcat7
          - name: jws-chown
          - name: jws-debugging
          - name: jws-disable-ajp
packages:
      repositories:
          - jboss-os
      install:
          - apr-util
artifacts:
    - path: jws-application-servers-3.1.0-RHEL7-x86_64.zip
      description: "Artifact is available on Customer Portal: https://access.redhat.com/jbossnetwork/restricted/softwareDetail.html?softwareId=50211&product=webserver&version=3.1.0&downloadType=distributions"
      md5: 39f7d6523a2c534bd66bebdb297714b1
    - path: jws-application-servers-3.1.1-RHEL7-x86_64.zip
      description: "Artifact is available on the Customer Portal: https://access.redhat.com/jbossnetwork/restricted/listSoftware.html?product=webserver&downloadType=securityPatches&version="
      md5: a74c29dfc2f5431e5b106a8932745092
    - path: jws-application-servers-3.1.2-RHEL7-x86_64.zip
      description: "Artifact is available on the Customer Portal: https://access.redhat.com/jbossnetwork/restricted/listSoftware.html?product=webserver&downloadType=securityPatches&version="
      md5: c55d4e033150c27e20c0fef6fc25e03c
run:
      user: 185
      cmd:
          - "/opt/webserver/bin/catalina.sh"
          - "run"
osbs:
      repository:
            name: jboss-webserver-3-docker
            branch: jb-webserver31-tomcat7
